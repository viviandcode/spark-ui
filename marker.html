<!DOCTYPE HTML>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">

		<title>Markers - Pixel Spark</title>
		<meta name="keywords" content="key words">
		<meta name="description" content="Pixel Spark">
		<link rel="icon" href="images/favicon.ico" mce_href="images/favicon.ico" type="image/x-icon">

		<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css"  media="all">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
		<link rel="stylesheet" href="css/style.css" type="text/css"  media="all">
		<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" type="text/css"  media="all">
	</head>
	<body>
		<div class="container">
			<nav class="navbar navbar-default" role="navigation" id="nav">
			  <div class="container-fluid">
			    <!-- Brand and toggle get grouped for better mobile display -->
			    <div class="navbar-header">
			      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu">
			        <span class="sr-only">Toggle navigation</span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			      </button>
			      <a class="navbar-brand pixel-font" href="#">Pixel Spark</a>
			    </div>
			    <!-- Collect the nav links, forms, and other content for toggling -->
			    <div class="collapse navbar-collapse" id="main-menu">
			      <ul class="nav navbar-nav navbar-right">
							<li><a href="#"><i class="fa fa-github" aria-hidden="true"></i> Github</a></li>
							<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i> Linkedin</a></li>
			        <li><a href="#"><i class="fa fa-pencil" aria-hidden="true"></i> Blog</a></li>
							<li class="active"><a href="#"><i class="fa fa-map-marker" aria-hidden="true"></i> Marker</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Category <span class="caret"></span></a>
								<ul class="dropdown-menu" role="menu">
									<li><a href="#">Blog</a></li>
									<li class="divider"></li>
									<li><a href="#">膜蛤</a></li>
									<li><a href="#">续一秒</a></li>
									<li class="divider"></li>
									<li><a href="#">Marker</a></li>
									<li><a href="#">Code</a></li>
								</ul>
							</li>
			      </ul>
			    </div><!-- /.navbar-collapse -->
			  </div><!-- /.container-fluid -->
			</nav>

			<div class="row">
				<div class="col-md-2 map-nav-wraper">
					<div class="panel panel-default">
						<div id="map-nav">

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing1</span>
											<time class="text-color-ccc text-nowrap">May. 21st 2017</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Shenmegui2</span>
											<time class="text-color-ccc text-nowrap">Mar. 22nd 2017</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing3</span>
											<time class="text-color-ccc text-nowrap">Jan. 21st 2017</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing4</span>
											<time class="text-color-ccc text-nowrap">Dec. 23rd 2016</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing4</span>
											<time class="text-color-ccc text-nowrap">Dec. 23rd 2016</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing4</span>
											<time class="text-color-ccc text-nowrap">Dec. 23rd 2016</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-map-marker" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">Chongqing4</span>
											<time class="text-color-ccc text-nowrap">Dec. 23rd 2016</time>
										</div>
									</a>
								</div>

								<div class="item clearfix">
									<a href="#" class="guider">
										<div class="col-xs-3 icon text-center text-color-ccc">
											<i class="fa fa-ellipsis-h" aria-hidden="true"></i>
										</div>
										<div class="col-xs-9">
											<span class="text-color-333">View All</span>
											<time class="text-color-ccc text-nowrap">Show all markers</time>
										</div>
									</a>
								</div>
						</div>
					</div>
				</div>

				<div class="col-md-10">
					<div class="panel panel-default">
						<div id="map"></div>
					</div>
				</div>
			</div>

		</div>
		<script src="http://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
		<script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
		<script>
			var points = [
				{
					"date":"2017-03-21",
					"title":"title4",
					"local":"local4",
					"lng":56.6045142761,
					"lat":27.6883215871,
				},
				{
					"date":"2017-03-03",
					"title":"title3",
					"local":"local3",
					"lng":56.6045142761,
					"lat":29.6883215871,
				},
				{
					"date":"2017-02-03",
					"title":"title2",
					"local":"local2",
					"lng":57.2045142761,
					"lat":29.6883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":57.2045142761,
					"lat":29.9883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":56.2045142761,
					"lat":25.9883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":58.2045142761,
					"lat":29.9883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":57.2045142761,
					"lat":30.9883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":55.2045142761,
					"lat":30.9883215871,
				},
				{
					"date":"2017-01-03",
					"title":"title1",
					"local":"local1",
					"lng":57.2045142761,
					"lat":31.9883215871,
				},
			];
			var map = L.map('map');

			L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			    attribution: 'Pixel Spark'
			}).addTo(map);

			var markers = [];
			//生成标记点
			for (var i = 0, count = points.length; i < count; i ++) {
				var point_array = points[i];
				var temp = L.marker([point_array.lng, point_array.lat]).addTo(map)
				    .bindPopup('<a href="#">'+ point_array.title +'</a> '+ point_array.local +'.<br> Easily customizable.');

				//最新marker pop默认弹出
				if(0 === i){
					map.setView([point_array.lng, point_array.lat], 8)
					temp.openPopup();
				}
				markers.push(temp);
			}

			var links = document.querySelectorAll("#map-nav a.guider");
			for (var i = 0, count = links.length; i < count; i++) {
				AddLinkAction(i);
			}
			function AddLinkAction(i){
				links[i].addEventListener("click", function(){
					markers[i].openPopup();
				});
			}
    </script>
	</body>
</html>
